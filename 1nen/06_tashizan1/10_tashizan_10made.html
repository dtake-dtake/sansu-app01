<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>１０までのたしざん</title>
  
  <link rel="stylesheet" href="../../common/common.css">
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

</head>
<body>
  <h1 id="main-title"></h1>
  <h2 id="sub-title"></h2>

  <div id="start-area" style="text-align:center; margin:40px 0;">
    <button id="start-btn">スタート！</button>
  </div>

  <div id="problems-section" style="display:none;">
    <div id="problems-wrapper"></div>
    <div class="button-area">
      <button id="check-answers">まるつけ</button>
      <button id="retry">もういちど</button>
    </div>
  </div>

  <div id="result-area">
    <div id="result"></div>
    <div id="highScoreArea">ハイスコア：<span id="highScoreValue">0</span> てん <button id="reset-highscore">リセット</button></div>
    <div id="dailyCountArea">今日のクリア：<span id="dailyCountValue">0</span> かい</div>
    <div id="monthlyCountArea">今月のクリア：<span id="monthlyCountValue">0</span> かい</div>
    <div id="clearCountArea">合計クリア：<span id="clearCountValue">0</span> かい</div>
    <div id="overallStatusArea">
      <span id="overallStatusText">ステータス：</span><span id="overallStars">―</span>
    </div>
    <div id="history-area">
      <strong>さいきんのきろく</strong>
      <ul id="history-list"></ul>
    </div>
  </div>

  <script>
    // 「10までのたし算」ドリルの設定
    const drillConfig = {
      // アプリのID（LocalStorageのキーなどで使用）
      appId: "tashizan-10made-ver3",

      // メインタイトルとして表示される文字列
      mainTitle: "６　たしざん(1)",

      // サブタイトル（問題内容）として表示される文字列
      title: "１０までのたしざん",

      // 問題を自動で作る関数
      problemGenerator: () => {
        const problems = [];
        const generated = new Set();
        const NUM_QUESTIONS = 10;

        while (problems.length < NUM_QUESTIONS) {
          // 答えが2から10になる組み合わせを生成
          const answer = Math.floor(Math.random() * 9) + 2;
          const a = Math.floor(Math.random() * (answer - 1)) + 1;
          const b = answer - a;

          // 「1+2」と「2+1」のような重複を避ける
          const problemKey = a < b ? `${a}+${b}` : `${b}+${a}`;
          if (generated.has(problemKey)) continue;
          generated.add(problemKey);

          problems.push({
            a: a,
            b: b,
            op: "+",
            answer: answer,
            displayText: `<span>${a}</span><span>+</span><span>${b}</span><span>=</span>__INPUT__`
          });
        }
        return problems;
      },

      // ハイスコアに応じた星の閾値
      starThresholds: {
        star_circle: 100,
        star1: 110,
        star2: 120,
        star3: 130,
        star4: 140,
        star5: 150,
      }
    };
  </script>
  
  <script src="../../common/common.js"></script>
  <script src="./themes.js"></script>
  
  <script>
    // 設定を元にアプリを初期化
    initializeDrillApp(drillConfig);
  </script>
  </body>
</html>