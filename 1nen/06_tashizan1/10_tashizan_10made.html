// drills/1nen/tashizan_10made/drill.js

// ① ドリルのメタ（見出し・保存キー・テーマ・配点・秒数・★しきい値）
window.drillMeta = {
  main:  "６　たし算⑴",              // h1
  sub:   "１０までのたしざん",        // h2（document.titleにも反映）
  appId: "1nen-tashizan-10made",      // ローカルストレージのキー分離に必須
  theme: "theme_sky",                 // themes.js の変数名

  // スコア関連（必要なものだけ書けばOK）
  pointsPerQuestion:    10,           // 1問あたりの点
  timeLimitPerQuestion: 5,            // 1問あたりの秒数（ボーナス用）

  // ★しきい値（旧・新どちらのキーでもOK：common.jsが吸収）
  starThresholds: {
    circle: 100,  // ○
    bronze: 110,  // ★☆☆☆☆
    silver: 120,  // ★★☆☆☆
    gold:   130,  // ★★★☆☆
    diamond:140   // ★★★★☆
  }
};

// ② 必須：問題生成ロジック
window.generateProblems = function () {
  // 例：2〜10の和になる足し算を重複なしで10問
  const list = [], used = new Set(), N = 10;
  while (list.length < N) {
    const ans = Math.floor(Math.random() * 9) + 2;      // 2〜10
    const a = Math.floor(Math.random() * (ans - 1)) + 1;
    const b = ans - a;
    const key = a < b ? `${a}+${b}` : `${b}+${a}`;
    if (used.has(key)) continue; used.add(key);
    list.push({
      // __INPUT__ の位置に回答欄が入る（common.jsの仕様）
      displayText: `<span>${a}</span> + <span>${b}</span> = __INPUT__`,
      answer: ans
    });
  }
  return list;
};
